{% extends "base_generica.html" %}

{% block content %}
    <div>
        <h1>Página de perfil para o usuário: {{ perfil_usuario }}</h1>
                
        {% if user.tipo_de_conta == 'comunidade-PF' %}
            {% csrf_token %}
            <br>
            <p>Tipo de conta: Comunidade PF</p>
            <br>
            <p>Detalhes: {{ perfil_usuario.detalhes }}
            <br>
            
            <div>
                <button onclick="document.getElementById('edit-det-form').style.display='block'">Editar detalhes</button>

                    <div id="edit-det-form" style="display:none">
                        <form method="post">
                            {% csrf_token %}
                            {{ form_atualizar_perfil.detalhes }}
                            <br>
                            <input type="submit" value="Salvar">
                            <button type="button" onclick="document.getElementById('edit-det-form').style.display='none'">Cancelar</button>
                        </form>
                    </div>            
            </div>

            <br>
            <div>
                {% if pf_perfil == none %}
                    <p>Sem dados cadastrados para o perfil</p>

                    <div>
                        <button onclick="document.getElementById('cria-ent-form').style.display='block'">Cadastrar dados</button>
        
                            <div id="cria-ent-form" style="display:none">
                                <form method="post">
                                    {% csrf_token %}        
                                    {{ form_criar_pf.as_p }}
                                    <br>
                                    <input type="submit" value="Salvar">
                                    <button type="button" onclick="document.getElementById('edit-det-form').style.display='none'">Cancelar</button>
                                </form>
                            </div>            
                    </div>

                {% else %}                
                    <p>Nome e sobrenome: {{ pf_perfil }} </p>
                {% endif %}
            </div>
        {% elif user.tipo_de_conta == 'comunidade-PJ' %}
            {% csrf_token %}
            <br>
            <p>Tipo de conta: Comunidade PJ </p>
            <br>
            <p>Detalhes: {{ perfil_usuario.detalhes }}
            <br>
            <div>
                <button onclick="document.getElementById('edit-det-form').style.display='block'">Editar detalhes</button>

                    <div id="edit-det-form" style="display:none">
                        <form method="post">
                            {% csrf_token %}
                            {{ form_atualizar_perfil.detalhes }}
                            <br>
                            <input type="submit" value="Salvar">
                            <button type="button" onclick="document.getElementById('edit-det-form').style.display='none'">Cancelar</button>
                        </form>
                    </div>            
            </div>
            <br>
            <div>
                {% if pj_perfil == none %}
                    <p>Sem dados cadastrados para o perfil</p>

                    <div>
                        <button onclick="document.getElementById('cria-ent-form').style.display='block'">Cadastrar dados</button>
        
                            <div id="cria-ent-form" style="display:none">
                                <form method="post">
                                    {% csrf_token %}        
                                    {{ form_criar_pj.as_p }}
                                    <br>
                                    <input type="submit" value="Salvar">
                                    <button type="button" onclick="document.getElementById('edit-det-form').style.display='none'">Cancelar</button>
                                </form>
                            </div>            
                    </div>

                {% else %}                
                    <p>Nome fantasia: {{ pj_perfil }} </p>
                {% endif %}
            </div>
        {% elif user.tipo_de_conta == 'entidade' %}
            {% csrf_token %}
            <p>Tipo de conta: Entidade</p>

                        <br>
            <p>Detalhes: {{ perfil_usuario.detalhes }}
           
            <div>
                <button onclick="document.getElementById('edit-det-form').style.display='block'">Editar detalhes</button>

                    <div id="edit-det-form" style="display:none">
                        <form method="post">
                            {% csrf_token %}
                            {{ form_atualizar_perfil.detalhes }}

                            {{ form_criar_entidade.as_p }}
                            <br>
                            <input type="submit" value="Salvar">
                            <button type="button" onclick="document.getElementById('edit-det-form').style.display='none'">Cancelar</button>
                        </form>
                    </div>            
            </div>
            
            <br>

            <div>
                {% if entidade_perfil == none %}
                    <p>Sem entidade cadastrada para o perfil</p>

                    <div>
                        <button onclick="document.getElementById('cria-ent-form').style.display='block'">Criar entidade</button>
        
                            <div id="cria-ent-form" style="display:none">
                                <form method="post">
                                    {% csrf_token %}        
                                    {{ form_criar_entidade.as_p }}
                                    <br>
                                    <input type="submit" value="Salvar">
                                    <button type="button" onclick="document.getElementById('edit-det-form').style.display='none'">Cancelar</button>
                                </form>
                            </div>            
                    </div>

                {% else %}                
                    <p>Entidade associada ao perfil: {{ entidade_perfil }} </p>
                {% endif %}
            </div>

        {% endif %}
    </div>

{% endblock content %}